<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>JS Bridge</title>
  <style>
    body {
      background-color: #7e7e7e;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      font-size: 1.25rem;
      color: white;
    }

    /* Version and info text styling */
    #info {
      font-size: 2.5rem;
      font-weight: 500;
      text-align: center;
      margin: 0.25rem 0;
    }

    /* Version text styling */
    body > div:first-child {
      font-size: 2.5rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .button-container {
      text-align: center;
      margin-bottom: 20px;
      width: 100%;
      max-width: 600px;
      padding: 0 1rem;
    }

    /* Responsive button styles */
    input[type="button"] {
      /* Use relative units for responsive sizing - MUCH BIGGER */
      padding: clamp(1.5rem, 4vw, 2.5rem) clamp(3rem, 8vw, 4rem);
      font-size: clamp(1.5rem, 4.5vw, 2rem);
      
      /* Visual styling */
      background-color: white;
      color: black;
      border: 1px solid #ccc;
      border-radius: 0.75rem;
      cursor: pointer;
      font-weight: 600;
      
      /* Responsive width and spacing - AUTO WIDTH FOR TEXT */
      width: auto;
      max-width: 90vw;
      min-width: 350px;
      margin: 1rem 0;
      display: block;
      white-space: nowrap;
      
      /* Smooth transitions */
      transition: all 0.2s ease;
    }

    /* Hover and focus states */
    input[type="button"]:hover {
      background-color: #f8f9fa;
      border-color: #999;
      transform: translateY(-1px);
    }

    input[type="button"]:focus {
      outline: 2px solid #007bff;
      outline-offset: 2px;
    }

    input[type="button"]:active {
      transform: translateY(0);
      background-color: #e9ecef;
    }

    /* Media queries for fine-tuned control */
    @media (max-width: 480px) {
      input[type="button"] {
        font-size: 1.375rem;
        padding: 1.25rem 2.5rem;
        min-width: 280px;
        max-width: 95vw;
      }
      
      .button-container {
        padding: 0 0.5rem;
      }
    }

    @media (min-width: 768px) {
      input[type="button"] {
        width: auto;
        min-width: 350px;
        display: inline-block;
        margin: 1rem;
      }
    }

    @media (min-width: 1024px) {
      input[type="button"] {
        min-width: 400px;
        font-size: 1.75rem;
        padding: 2rem 3.5rem;
      }
    }
  </style>
</head>

<body>
  <div>Version: 1.1.7</div>
  <br />
  <div id="info"></div>
  <br />
  <div class="button-container">
    <input type="button" value="Get Dating Token" onClick="getDatingToken()" />
    <br />
    <input type="button" value="Get Dating Token (forceFetch)" onClick="getDatingToken(true)" />
    </br>
    <input type="button" value="Send Verification Success" onClick="sendVerificationSuccess()" />
    <br />
    <input type="button" value="Send Verification Error" onClick="sendVerificationError()" />
    <br />
    <input type="button" value="Send Analytics" onClick="sendAnalytics()" />
  </div>

  <div id="jwtDisplay" style="
        margin-top: 20px;
        padding: 10px;
        background-color: #f0f0f0;
        border-radius: 5px;
        display: none;
        max-width: 600px;
        width: 90%;
      ">
    <p id="jwtTokenText" style="word-break: break-all; font-family: monospace; font-size: 12px"></p>
  </div>

  <br />
  <div id="error"></div>
  <br />

  <script type="text/javascript">
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const lang = urlParams.get("lang");
    const sidParam = urlParams.get("sid");

    let sid = null;

    switch (sidParam) {
      case "0":
        sid = "Android";
        break;

      case "1":
        sid = "iOS";
        break;
    }

    const infoDiv = document.getElementById("info");
    const errorDiv = document.getElementById("error");

    infoDiv.textContent = "Lang: " + lang + ", sid: " + sid;

    window.AppHandlers = {
      onRequestSuccess: function (requestId, data) {
        const payload = data ? ", Data => " + JSON.stringify(data) : "";
        const text = "Request ID => " + requestId + payload;
        jwtTokenText.textContent = "onRequestSuccess: " + text;
        jwtDisplay.style.display = "block";
        errorDiv.textContent = "";
      },

      onRequestError: function (requestId, message, code) {
        const text =
          "Request ID => " +
          requestId +
          ", Message => " +
          message +
          ", Code => " +
          code;

        jwtTokenText.textContent = "onRequestError: " + text;
        jwtDisplay.style.display = "block";
        errorDiv.textContent = "";
      },
    };

    function getDatingToken(forceFetch) {
      try {
        const requiestId = getRequestId();
        if (forceFetch) {
          App.request(
            requiestId,
            "Dating.getDatingToken",
            '{ "forceFetch" : true}'
          );
          errorDiv.textContent = "";
        } else {
          App.request(requiestId, "Dating.getDatingToken", "{}");
        }
      } catch (error) {
        errorDiv.textContent = error;
      }
    }

    function sendVerificationSuccess() {
      try {
        const requiestId = getRequestId();
        App.request(requiestId, "Dating.sendVerificationSuccess", "{}");
        errorDiv.textContent = "";
      } catch (error) {
        errorDiv.textContent = error;
      }
    }

    function sendVerificationError() {
      try {
        const requiestId = getRequestId();
        App.request(
          requiestId,
          "Dating.sendVerificationError",
          '{ "code": 500,  "messages": ["Something went wrong"]}'
        );
        errorDiv.textContent = "";
      } catch (error) {
        errorDiv.textContent = error;
      }
    }

    function sendAnalytics() {
      try {
        const requiestId = getRequestId();
        App.request(
          requiestId,
          "Analytics.track",
          '{eventName: "Act on Dating by tabs [Dating]", "properties": {}}'
        );
      } catch (error) {
        errorDiv.textContent = error;
      }
    }

    function getRequestId() {
      return +String(Date.now()).slice(-7).padStart(7, "0");
    }
  </script>

  <footer></footer>
</body>

</html>